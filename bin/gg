#!/usr/bin/env bash

# Setup.
VERSION="0.0.1"

# Colors, etc.
normal() {
	printf "$1"
}

success() {
	printf "\e[0;32m$1\e[0m"
}

success_bold() {
	printf "\e[1;32m$1\e[0m"
}

success_underline() {
	printf "\e[4;32m$1\e[0m"
}

notice() {
	printf "\e[0;33m$1\e[0m"
}

notice_bold() {
	printf "\e[1;33m$1\e[0m"
}

notice_underline () {
	printf "\e[4;33m$1\e[0m"
}

whoops() {
	printf "\e[1;31m$1\e[0m"
}

# Commands.

version() {
	success "gg"
	normal " version "
	notice "$VERSION\n"
}

init() {
	output=($(git init))

	success "[✔]"
	success_bold " ${output[0]} "
	success "${output[1]} Git repository.\n"
}

ignore_list() {
	list=$(curl --silent "https://www.gitignore.io/api/list")
	list=(${list//,/ })

	for ignore in "${list[@]}"; do
		normal "|- $ignore\n"
	done

	notice "\n[~] You must enter one of the templates or languages listed above.\n"
}

ignore() {
	if [ -z $1 ]; then
		ignore_list
	else
		ignore=$(curl --silent "https://www.gitignore.io/api/$1")
		ignore_array=($ignore)

		if [ ${ignore_array[5]} == "ERROR:" ]; then
			whoops "[✖] Template $1 does not exist.\n\n"

			ignore_list
		else
			if [[ -s ".gitignore" ]]; then
				echo -e	 "\n" >> .gitignore
			fi

			echo "$ignore" >> .gitignore
		fi
	fi
}
